{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{391:function(e,t,c){\"use strict\";c.r(t);var a=c(0),n=(c(45),c(21)),s=c(43),o=c(32),b=c(83);function l(e){let t,c,n=e[6].license+\"\";return{c(){t=Object(a.z)(\"p\"),c=Object(a.cb)(n),this.h()},l(e){t=Object(a.n)(e,\"P\",{class:!0});var s=Object(a.l)(t);c=Object(a.p)(s,n),s.forEach(a.y),this.h()},h(){Object(a.h)(t,\"class\",\"help is-danger\")},m(e,n){Object(a.J)(e,t,n),Object(a.f)(t,c)},p(e,t){64&t&&n!==(n=e[6].license+\"\")&&Object(a.X)(c,n)},d(e){e&&Object(a.y)(t)}}}function r(e){let t,c,n=e[6]._form+\"\";return{c(){t=Object(a.z)(\"p\"),c=Object(a.cb)(n),this.h()},l(e){t=Object(a.n)(e,\"P\",{class:!0});var s=Object(a.l)(t);c=Object(a.p)(s,n),s.forEach(a.y),this.h()},h(){Object(a.h)(t,\"class\",\"help is-danger\")},m(e,n){Object(a.J)(e,t,n),Object(a.f)(t,c)},p(e,t){64&t&&n!==(n=e[6]._form+\"\")&&Object(a.X)(c,n)},d(e){e&&Object(a.y)(t)}}}function i(e){let t;return{c(){t=Object(a.cb)(\"Sign up\")},l(e){t=Object(a.p)(e,\"Sign up\")},m(e,c){Object(a.J)(e,t,c)},d(e){e&&Object(a.y)(t)}}}function j(e){let t,c,n,j,O,u,d,f,h,p,m,w,$,g,y,v,_,E,S,k,z,x,D,P,L,I,J,N,T,U,C,A,R,V,Y,K,G,X;function B(t){e[8].call(null,t)}c=new s.a({props:{dark:!0}});let W={name:\"Username\",icon:\"user\",id:\"username\",formStatus:e[6]};function H(t){e[9].call(null,t)}void 0!==e[1]&&(W.value=e[1]),p=new b.a({props:W}),a.j.push(()=>Object(a.i)(p,\"value\",B));let M={name:\"Email\",icon:\"envelope\",id:\"email\",formStatus:e[6]};function F(t){e[10].call(null,t)}void 0!==e[2]&&(M.value=e[2]),$=new b.a({props:M}),a.j.push(()=>Object(a.i)($,\"value\",H));let q={name:\"Password\",icon:\"lock\",id:\"password\",type:\"password\",formStatus:e[6]};function Q(t){e[11].call(null,t)}void 0!==e[3]&&(q.value=e[3]),v=new b.a({props:q}),a.j.push(()=>Object(a.i)(v,\"value\",F));let Z={name:\"Repeat password\",icon:\"lock\",id:\"password_confirmation\",type:\"password\",formStatus:e[6]};void 0!==e[4]&&(Z.value=e[4]),S=new b.a({props:Z}),a.j.push(()=>Object(a.i)(S,\"value\",Q));let ee=null!=e[6].license&&l(e),te=null!=e[6]._form&&r(e);return Y=new o.a({props:{loading:e[0],asHref:\"/sign-up-success\",submit:!0,$$slots:{default:[i]},$$scope:{ctx:e}}}),Y.$on(\"click\",(function(){Object(a.K)(e[7])&&e[7].apply(this,arguments)})),{c(){t=Object(a.ab)(),Object(a.s)(c.$$.fragment),n=Object(a.ab)(),j=Object(a.z)(\"section\"),O=Object(a.z)(\"div\"),u=Object(a.z)(\"form\"),d=Object(a.z)(\"h2\"),f=Object(a.cb)(\"Sign up\"),h=Object(a.ab)(),Object(a.s)(p.$$.fragment),w=Object(a.ab)(),Object(a.s)($.$$.fragment),y=Object(a.ab)(),Object(a.s)(v.$$.fragment),E=Object(a.ab)(),Object(a.s)(S.$$.fragment),z=Object(a.ab)(),x=Object(a.z)(\"div\"),D=Object(a.z)(\"div\"),P=Object(a.z)(\"label\"),L=Object(a.z)(\"input\"),I=Object(a.cb)(\"\\n            I agree to the\\n            \"),J=Object(a.z)(\"a\"),N=Object(a.cb)(\"Terms and Conditions\"),T=Object(a.cb)(\"\\n            and the\\n            \"),U=Object(a.z)(\"a\"),C=Object(a.cb)(\"GNU Affero General Public License\"),A=Object(a.ab)(),ee&&ee.c(),R=Object(a.ab)(),te&&te.c(),V=Object(a.ab)(),Object(a.s)(Y.$$.fragment),this.h()},l(e){Object(a.T)('[data-svelte=\"svelte-1n7oua1\"]',document.head).forEach(a.y),t=Object(a.o)(e),Object(a.m)(c.$$.fragment,e),n=Object(a.o)(e),j=Object(a.n)(e,\"SECTION\",{class:!0});var s=Object(a.l)(j);O=Object(a.n)(s,\"DIV\",{class:!0});var o=Object(a.l)(O);u=Object(a.n)(o,\"FORM\",{});var b=Object(a.l)(u);d=Object(a.n)(b,\"H2\",{class:!0});var l=Object(a.l)(d);f=Object(a.p)(l,\"Sign up\"),l.forEach(a.y),h=Object(a.o)(b),Object(a.m)(p.$$.fragment,b),w=Object(a.o)(b),Object(a.m)($.$$.fragment,b),y=Object(a.o)(b),Object(a.m)(v.$$.fragment,b),E=Object(a.o)(b),Object(a.m)(S.$$.fragment,b),z=Object(a.o)(b),x=Object(a.n)(b,\"DIV\",{class:!0});var r=Object(a.l)(x);D=Object(a.n)(r,\"DIV\",{class:!0});var i=Object(a.l)(D);P=Object(a.n)(i,\"LABEL\",{class:!0});var m=Object(a.l)(P);L=Object(a.n)(m,\"INPUT\",{type:!0,name:!0,id:!0}),I=Object(a.p)(m,\"\\n            I agree to the\\n            \"),J=Object(a.n)(m,\"A\",{href:!0});var g=Object(a.l)(J);N=Object(a.p)(g,\"Terms and Conditions\"),g.forEach(a.y),T=Object(a.p)(m,\"\\n            and the\\n            \"),U=Object(a.n)(m,\"A\",{href:!0});var _=Object(a.l)(U);C=Object(a.p)(_,\"GNU Affero General Public License\"),_.forEach(a.y),m.forEach(a.y),i.forEach(a.y),A=Object(a.o)(r),ee&&ee.l(r),r.forEach(a.y),R=Object(a.o)(b),te&&te.l(b),V=Object(a.o)(b),Object(a.m)(Y.$$.fragment,b),b.forEach(a.y),o.forEach(a.y),s.forEach(a.y),this.h()},h(){document.title=\"Sign up - LibreLingo\",Object(a.h)(d,\"class\",\"is-size-2\"),Object(a.h)(L,\"type\",\"checkbox\"),Object(a.h)(L,\"name\",\"license\"),Object(a.h)(L,\"id\",\"license\"),Object(a.h)(J,\"href\",\"/tos\"),Object(a.h)(U,\"href\",\"/license\"),Object(a.h)(P,\"class\",\"checkbox\"),Object(a.h)(D,\"class\",\"control\"),Object(a.h)(x,\"class\",\"field\"),Object(a.h)(O,\"class\",\"container\"),Object(a.h)(j,\"class\",\"section\")},m(s,o){Object(a.J)(s,t,o),Object(a.N)(c,s,o),Object(a.J)(s,n,o),Object(a.J)(s,j,o),Object(a.f)(j,O),Object(a.f)(O,u),Object(a.f)(u,d),Object(a.f)(d,f),Object(a.f)(u,h),Object(a.N)(p,u,null),Object(a.f)(u,w),Object(a.N)($,u,null),Object(a.f)(u,y),Object(a.N)(v,u,null),Object(a.f)(u,E),Object(a.N)(S,u,null),Object(a.f)(u,z),Object(a.f)(u,x),Object(a.f)(x,D),Object(a.f)(D,P),Object(a.f)(P,L),L.checked=e[5],Object(a.f)(P,I),Object(a.f)(P,J),Object(a.f)(J,N),Object(a.f)(P,T),Object(a.f)(P,U),Object(a.f)(U,C),Object(a.f)(x,A),ee&&ee.m(x,null),Object(a.f)(u,R),te&&te.m(u,null),Object(a.f)(u,V),Object(a.N)(Y,u,null),K=!0,G||(X=[Object(a.L)(L,\"change\",e[12]),Object(a.L)(u,\"submit\",Object(a.S)((function(){Object(a.K)(e[7])&&e[7].apply(this,arguments)})))],G=!0)},p(t,[c]){e=t;const n={};64&c&&(n.formStatus=e[6]),!m&&2&c&&(m=!0,n.value=e[1],Object(a.c)(()=>m=!1)),p.$set(n);const s={};64&c&&(s.formStatus=e[6]),!g&&4&c&&(g=!0,s.value=e[2],Object(a.c)(()=>g=!1)),$.$set(s);const o={};64&c&&(o.formStatus=e[6]),!_&&8&c&&(_=!0,o.value=e[3],Object(a.c)(()=>_=!1)),v.$set(o);const b={};64&c&&(b.formStatus=e[6]),!k&&16&c&&(k=!0,b.value=e[4],Object(a.c)(()=>k=!1)),S.$set(b),32&c&&(L.checked=e[5]),null!=e[6].license?ee?ee.p(e,c):(ee=l(e),ee.c(),ee.m(x,null)):ee&&(ee.d(1),ee=null),null!=e[6]._form?te?te.p(e,c):(te=r(e),te.c(),te.m(u,V)):te&&(te.d(1),te=null);const i={};1&c&&(i.loading=e[0]),262144&c&&(i.$$scope={dirty:c,ctx:e}),Y.$set(i)},i(e){K||(Object(a.eb)(c.$$.fragment,e),Object(a.eb)(p.$$.fragment,e),Object(a.eb)($.$$.fragment,e),Object(a.eb)(v.$$.fragment,e),Object(a.eb)(S.$$.fragment,e),Object(a.eb)(Y.$$.fragment,e),K=!0)},o(e){Object(a.fb)(c.$$.fragment,e),Object(a.fb)(p.$$.fragment,e),Object(a.fb)($.$$.fragment,e),Object(a.fb)(v.$$.fragment,e),Object(a.fb)(S.$$.fragment,e),Object(a.fb)(Y.$$.fragment,e),K=!1},d(e){e&&Object(a.y)(t),Object(a.w)(c,e),e&&Object(a.y)(n),e&&Object(a.y)(j),Object(a.w)(p),Object(a.w)($),Object(a.w)(v),Object(a.w)(S),ee&&ee.d(),te&&te.d(),Object(a.w)(Y),G=!1,Object(a.U)(X)}}}const O=/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;function u(e,t,c){let a=!1,s=\"\",o=\"\",b=\"\",l=\"\",r=!1,i={};let j;return e.$$.update=()=>{78&e.$$.dirty&&c(7,j=async()=>{c(0,a=!0),c(6,i={}),s?s.length<4&&c(6,i={...i,username:\"Please choose a username that has at least 4 characters\"}):c(6,i={...i,username:\"Please choose a username\"}),o?O.test(o)||c(6,i={...i,email:\"This does not look like a valid email address\"}):c(6,i={...i,email:\"Please tell us your email address\"}),b?b.length<6?c(6,i={...i,password:\"Your password is too short. Please choose a password that's at least 5 characters long.\"}):l?b===l||c(6,i={...i,password_confirmation:\"The passwords don't match\"}):c(6,i={...i,password_confirmation:\"Please verify your chosen password by repeating it\"}):c(6,i={...i,password:\"Please choose a password\"}),r?s.length<4&&c(6,i={...i,username:\"Please choose a username that has at least 4 characters\"}):c(6,i={...i,license:\"You have to accept the agreements.\"}),window._test_fake_signup&&window._test_user_already_exists&&c(6,i={...i,_form:\"User already exists. Please choose another username.\"});const e=0===Object.keys(i).length;window._test_fake_signup?setTimeout((function(){!0===e?(c(0,a=!1),window.location=\"/sign-up-success\"):c(0,a=!1)}),500):e?fetch(n.a.database.signUpEndpoint,{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:s,email:o,password:b})}).then(e=>e.json()).then(({success:e,error:t})=>{e?(c(0,a=!1),window.location=\"/sign-up-success\"):(c(0,a=!1),\"invalid-payload\"===t.code?c(6,i=t.details):c(6,i={_form:\"Server error\"}))}):c(0,a=!1)})},[a,s,o,b,l,r,i,j,function(e){s=e,c(1,s)},function(e){o=e,c(2,o)},function(e){b=e,c(3,b)},function(e){l=e,c(4,l)},function(){r=this.checked,c(5,r)}]}class d extends a.a{constructor(e){super(),Object(a.I)(this,e,u,j,a.V,{})}}t.default=d},45:function(e,t,c){\"use strict\";(function(e){var a=c(21),n=c(46),s=c(8),o=c.n(s);let b,l,r;const i=t=>{const n=new(void 0!==e.env.JEST_WORKER_ID?c(34):c(34).default)(t).setMaxListeners(a.a.database.maxNumberOfListeners);return n.changes({since:\"now\",live:!0,include_docs:!0}).on(\"change\",()=>{if(void 0!==e.env.JEST_WORKER_ID)return;c(19).default.update(e=>({...e,dbUpdatedAt:Date.now()}))}),n};{const e=c(19).default,t=c(34).default;l=new t(`${a.a.database.remote}/${o.a.get(\"loginDb\")}`,{skip_setup:!0,live:!0}),b=i(a.a.database.local),window._DB=b,o.a.get(\"loginDb\")===Object(n.a)(\"---fakeUser\")&&e.update(e=>({...e,user:{name:\"---fakeUser\"},online:!0})),o.a.get(\"loginDb\")&&a.a.features.authEnabled?fetch(`${a.a.database.remote}/_session`,{credentials:\"include\"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),s())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{o.a.set(\"loginDb\",Object(n.a)(\"---fakeUser\"),{expires:a.a.database.auth.expireDays}),window.location.href=\"/course/spanish-from-english/\"},window._Login=async(t,c)=>{if(!1===window._test_credentials_correct)throw new Error(\"Incorrect username or password\");if(!0===window._test_credentials_correct)return window._fakeLogin();const s=await(await fetch(`${a.a.database.remote}/_session`,{method:\"post\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:t,password:c})})).json();if(s.error){if(\"unauthorized\"===s.error)throw new Error(\"Username or password is incorrect\");throw new Error(\"Couldn't log in. Please try again later\")}e.update(e=>({...e,online:null})),o.a.set(\"loginDb\",Object(n.a)(t),{expires:a.a.database.auth.expireDays}),window.location.reload(!1),window.location.href=\"/course/spanish-from-english/\"},window._Logout=async()=>{try{r&&(await r.cancel(),await fetch(`${a.a.database.remote}/_session`,{method:\"delete\"}))}finally{o.a.remove(\"loginDb\"),e.update(e=>({...e,user:null,online:null})),await b.destroy(),window.location.reload(!1)}};const s=()=>{r=b.sync(l).on(\"complete\",(function(){e.update(e=>({...e,online:!0}))})).on(\"error\",(function(){e.update(e=>({...e,online:!1}))}))}}void 0!==e.env.JEST_WORKER_ID&&(b=i(a.a.database.local),b.__reset=async()=>{const e=await b.allDocs();await Promise.all(e.rows.map((function(e){return b.remove(e.id,e.value.rev)})))}),t.a=b}).call(this,c(20))},46:function(e,t,c){\"use strict\";t.a=e=>`userdb-${(e=>e.split(\"\").map(e=>e.charCodeAt(0).toString(16)).join(\"\"))(e)}`},58:function(e,t){},83:function(e,t,c){\"use strict\";var a=c(0),n=c(47);function s(e){let t,c,n;return{c(){t=Object(a.z)(\"input\"),this.h()},l(e){t=Object(a.n)(e,\"INPUT\",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(a.h)(t,\"class\",\"input\"),Object(a.h)(t,\"type\",\"text\"),Object(a.h)(t,\"name\",e[2]),Object(a.h)(t,\"id\",e[2]),Object(a.db)(t,\"is-danger\",null!=e[5])},m(s,o){Object(a.J)(s,t,o),Object(a.Y)(t,e[0]),c||(n=Object(a.L)(t,\"input\",e[7]),c=!0)},p(e,c){4&c&&Object(a.h)(t,\"name\",e[2]),4&c&&Object(a.h)(t,\"id\",e[2]),1&c&&t.value!==e[0]&&Object(a.Y)(t,e[0]),32&c&&Object(a.db)(t,\"is-danger\",null!=e[5])},d(e){e&&Object(a.y)(t),c=!1,n()}}}function o(e){let t,c,n;return{c(){t=Object(a.z)(\"input\"),this.h()},l(e){t=Object(a.n)(e,\"INPUT\",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(a.h)(t,\"class\",\"input\"),Object(a.h)(t,\"type\",\"password\"),Object(a.h)(t,\"name\",e[2]),Object(a.h)(t,\"id\",e[2]),Object(a.db)(t,\"is-danger\",null!=e[5])},m(s,o){Object(a.J)(s,t,o),Object(a.Y)(t,e[0]),c||(n=Object(a.L)(t,\"input\",e[8]),c=!0)},p(e,c){4&c&&Object(a.h)(t,\"name\",e[2]),4&c&&Object(a.h)(t,\"id\",e[2]),1&c&&t.value!==e[0]&&Object(a.Y)(t,e[0]),32&c&&Object(a.db)(t,\"is-danger\",null!=e[5])},d(e){e&&Object(a.y)(t),c=!1,n()}}}function b(e){let t,c;return{c(){t=Object(a.z)(\"p\"),c=Object(a.cb)(e[5]),this.h()},l(n){t=Object(a.n)(n,\"P\",{class:!0});var s=Object(a.l)(t);c=Object(a.p)(s,e[5]),s.forEach(a.y),this.h()},h(){Object(a.h)(t,\"class\",\"help is-danger\")},m(e,n){Object(a.J)(e,t,n),Object(a.f)(t,c)},p(e,t){32&t&&Object(a.X)(c,e[5])},d(e){e&&Object(a.y)(t)}}}function l(e){let t,c,l,r,i,j,O,u,d,f,h=\"text\"===e[4]&&s(e),p=\"password\"===e[4]&&o(e);u=new n.a({props:{size:\"small\",icon:e[3],left:!0}});let m=null!=e[5]&&b(e);return{c(){t=Object(a.z)(\"div\"),c=Object(a.z)(\"label\"),l=Object(a.cb)(e[1]),r=Object(a.ab)(),i=Object(a.z)(\"div\"),h&&h.c(),j=Object(a.ab)(),p&&p.c(),O=Object(a.ab)(),Object(a.s)(u.$$.fragment),d=Object(a.ab)(),m&&m.c(),this.h()},l(n){t=Object(a.n)(n,\"DIV\",{class:!0});var s=Object(a.l)(t);c=Object(a.n)(s,\"LABEL\",{class:!0,for:!0});var o=Object(a.l)(c);l=Object(a.p)(o,e[1]),o.forEach(a.y),r=Object(a.o)(s),i=Object(a.n)(s,\"DIV\",{class:!0});var b=Object(a.l)(i);h&&h.l(b),j=Object(a.o)(b),p&&p.l(b),O=Object(a.o)(b),Object(a.m)(u.$$.fragment,b),b.forEach(a.y),d=Object(a.o)(s),m&&m.l(s),s.forEach(a.y),this.h()},h(){Object(a.h)(c,\"class\",\"label\"),Object(a.h)(c,\"for\",e[2]),Object(a.h)(i,\"class\",\"control has-icons-left\"),Object(a.h)(t,\"class\",\"field\")},m(e,n){Object(a.J)(e,t,n),Object(a.f)(t,c),Object(a.f)(c,l),Object(a.f)(t,r),Object(a.f)(t,i),h&&h.m(i,null),Object(a.f)(i,j),p&&p.m(i,null),Object(a.f)(i,O),Object(a.N)(u,i,null),Object(a.f)(t,d),m&&m.m(t,null),f=!0},p(e,[n]){(!f||2&n)&&Object(a.X)(l,e[1]),(!f||4&n)&&Object(a.h)(c,\"for\",e[2]),\"text\"===e[4]?h?h.p(e,n):(h=s(e),h.c(),h.m(i,j)):h&&(h.d(1),h=null),\"password\"===e[4]?p?p.p(e,n):(p=o(e),p.c(),p.m(i,O)):p&&(p.d(1),p=null);const r={};8&n&&(r.icon=e[3]),u.$set(r),null!=e[5]?m?m.p(e,n):(m=b(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i(e){f||(Object(a.eb)(u.$$.fragment,e),f=!0)},o(e){Object(a.fb)(u.$$.fragment,e),f=!1},d(e){e&&Object(a.y)(t),h&&h.d(),p&&p.d(),Object(a.w)(u),m&&m.d()}}}function r(e,t,c){let{name:a}=t,{id:n}=t,{icon:s}=t,{type:o=\"text\"}=t,{value:b}=t,{formStatus:l={}}=t,r=null;return e.$$set=e=>{\"name\"in e&&c(1,a=e.name),\"id\"in e&&c(2,n=e.id),\"icon\"in e&&c(3,s=e.icon),\"type\"in e&&c(4,o=e.type),\"value\"in e&&c(0,b=e.value),\"formStatus\"in e&&c(6,l=e.formStatus)},e.$$.update=()=>{68&e.$$.dirty&&c(5,r=l[n])},[b,a,n,s,o,r,l,function(){b=this.value,c(0,b)},function(){b=this.value,c(0,b)}]}class i extends a.a{constructor(e){super(),Object(a.I)(this,e,r,l,a.V,{name:1,id:2,icon:3,type:4,value:0,formStatus:6})}}t.a=i}}]);","extractedComments":[]}