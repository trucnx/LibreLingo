import{writable as n,derived as e}from"svelte/store";import t from"intl-messageformat";const o=(n,e="")=>{const t={};for(const r in n){const i=e+r;"object"==typeof n[r]?Object.assign(t,o(n[r],`${i}.`)):t[i]=n[r]}return t};let r;const i=n({});function a(n){return n in r}function l(n,e){if(a(n)){const t=function(n){return r[n]||null}(n);if(e in t)return t[e]}return null}function s(n,...e){const t=e.map(n=>o(n));i.update(e=>(e[n]=Object.assign(e[n]||{},...t),e))}const c=e([i],([n])=>Object.keys(n));i.subscribe(n=>r=n);const u={};function m(n){return u[n]}function f(n){return E(n).reverse().some(m)}const d={};function w(n){if(!f(n))return;if(n in d)return d[n];const e=function(n){return E(n).reverse().map(n=>{const e=m(n);return[n,e?[...e]:[]]}).filter(([,n])=>n.length>0)}(n);return 0!==e.length?(d[n]=Promise.all(e.map(([n,e])=>Promise.all(e.map(n=>n())).then(e=>{!function(n){delete u[n]}(n),e=e.map(n=>n.default||n),s(n,...e)}))).then(()=>{delete d[n]}),d[n]):void 0}function g(n,e){m(n)||function(n){u[n]=new Set}(n);const t=m(n);m(n).has(e)||(a(n)||i.update(e=>(e[n]={},e)),t.add(e))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function p(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]])}return t}const b={fallbackLocale:null,initialLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0};function h(){return b}function y(n){const{formats:e}=n,t=p(n,["formats"]),o=n.initialLocale||n.fallbackLocale;return Object.assign(b,t,{initialLocale:o}),e&&("number"in e&&Object.assign(b.formats.number,e.number),"date"in e&&Object.assign(b.formats.date,e.date),"time"in e&&Object.assign(b.formats.time,e.time)),j.set(o)}const O=n(!1);let v;const j=n(null);function L(n,e){return 0===e.indexOf(n)&&n!==e}function k(n,e){return n===e||L(n,e)||L(e,n)}function x(n){const e=n.lastIndexOf("-");if(e>0)return n.slice(0,e);const{fallbackLocale:t}=h();return t&&!k(n,t)?t:null}function E(n){const e=n.split("-").map((n,e,t)=>t.slice(0,e+1).join("-")),{fallbackLocale:t}=h();return t&&!k(n,t)?e.concat(E(t)):e}function $(){return v}j.subscribe(n=>{v=n,"undefined"!=typeof window&&document.documentElement.setAttribute("lang",n)});const D=j.set;j.set=n=>{if(function n(e){return null==e||a(e)?e:n(x(e))}(n)&&f(n)){const e=h().loadingDelay;let t;return"undefined"!=typeof window&&null!=$()&&e?t=window.setTimeout(()=>O.set(!0),e):O.set(!0),w(n).then(()=>{D(n)}).finally(()=>{clearTimeout(t),O.set(!1)})}return D(n)},j.update=n=>D(n(v));const I=(n,e)=>{const t=n.split("&").find(n=>0===n.indexOf(`${e}=`));return t?t.split("=").pop():null},N=(n,e)=>{const t=e.exec(n);return t&&t[1]||null},P=n=>"undefined"==typeof window?null:N(window.location.hostname,n),S=n=>"undefined"==typeof window?null:N(window.location.pathname,n),T=()=>"undefined"==typeof window?null:window.navigator.language||window.navigator.languages[0],A=n=>"undefined"==typeof window?null:I(window.location.search.substr(1),n),M=n=>"undefined"==typeof window?null:I(window.location.hash.substr(1),n),F={},Z=(n,e)=>{if(null==e)return null;const t=l(e,n);return t||Z(n,x(e))},C=(n,e)=>{if(e in F&&n in F[e])return F[e][n];const t=Z(n,e);return t?((n,e,t)=>t?(e in F||(F[e]={}),n in F[e]||(F[e][n]=t),t):t)(n,e,t):null},J=n=>{const e=Object.create(null);return t=>{const o=JSON.stringify(t);return o in e?e[o]:e[o]=n(t)}},U=(n,e)=>{const t=h().formats;if(n in t&&e in t[n])return t[n][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${n} format.`)},_=J(n=>{var{locale:e,format:t}=n,o=p(n,["locale","format"]);if(null==e)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return t&&(o=U("number",t)),new Intl.NumberFormat(e,o)}),q=J(n=>{var{locale:e,format:t}=n,o=p(n,["locale","format"]);if(null==e)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return t?o=U("date",t):0===Object.keys(o).length&&(o=U("date","short")),new Intl.DateTimeFormat(e,o)}),z=J(n=>{var{locale:e,format:t}=n,o=p(n,["locale","format"]);if(null==e)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return t?o=U("time",t):0===Object.keys(o).length&&(o=U("time","short")),new Intl.DateTimeFormat(e,o)}),B=(n={})=>{var{locale:e=$()}=n,t=p(n,["locale"]);return _(Object.assign({locale:e},t))},G=(n={})=>{var{locale:e=$()}=n,t=p(n,["locale"]);return q(Object.assign({locale:e},t))},H=(n={})=>{var{locale:e=$()}=n,t=p(n,["locale"]);return z(Object.assign({locale:e},t))},K=J((n,e=$())=>new t(n,e,h().formats)),Q=(n,e={})=>{"object"==typeof n&&(n=(e=n).id);const{values:t,locale:o=$(),default:r}=e;if(null==o)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");const i=C(n,o);return i?t?K(i,o).format(t):i:(h().warnOnMissingMessages&&console.warn(`[svelte-i18n] The message "${n}" was not found in "${E(o).join('", "')}".${f($())?"\n\nNote: there are at least one loader still registered to this locale that wasn't executed.":""}`),r||n)},R=(n,e)=>H(e).format(n),V=(n,e)=>G(e).format(n),W=(n,e)=>B(e).format(n),X=e([j,i],()=>Q),Y=e([j],()=>R),nn=e([j],()=>V),en=e([j],()=>W);function tn(n){return n}function on(n){return w(n||$()||h().initialLocale)}export{X as _,s as addMessages,nn as date,tn as defineMessages,i as dictionary,X as format,G as getDateFormatter,M as getLocaleFromHash,P as getLocaleFromHostname,T as getLocaleFromNavigator,S as getLocaleFromPathname,A as getLocaleFromQueryString,K as getMessageFormatter,B as getNumberFormatter,H as getTimeFormatter,y as init,O as isLoading,j as locale,c as locales,en as number,g as register,X as t,Y as time,on as waitLocale};
